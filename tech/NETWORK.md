# 네트워크


### 1.OSI 7계층이란? 

국제 표준화 기구에서 개발한 모델로서 네트워크 프로토콜 디자인과 통신을 계층으로 나누어서 설명한것입니다.  
네트워크 통신이 일어나는과정을 7단계로 나누어 놓은것입니다.  

OSI 7계층은 물리,데이터링크,네트워크,전송,세션,표현,응용 계층으로 나누어 집니다.
 

#### 1-1. OSI 7계층을 나누는 이유는 무엇인가? 

 계층을 나눈 이유는 통신이 일어나는 과정을 단계별로 파악할수 있기 때문입니다.  
 이를 통해 복잡한 통신의 흐름을 사람이 알아보기 쉽고 문제가 발생했을 경우 문제가 발생한 계층만 보수하여 문제를 해결할 수 있습니다.  
 이는 유지보수 측면에서 큰 강점이기 때문에 계층을 나누어 사용합니다.  
 

#### 1-2. osi 7계층의 각 계층에 대한 설명 

* **물리 계층(1계층)**  

데이터를 전기적 신호로 변환해서 주고받는 기능을 수행합니다.  
전송하는(받는) **데이터가 무엇인지**, **에러가 존재하는지 알수 없고** 주고 받는 기능만 수행합니다.  
전송단위는 비트이며 케이블, 리피터, 허브등의 장비를 사용합니다.  

* **데이터 링크(2계층)** 

물리 계층으로 송수신 되는 **정보의 오류와 재전송, 그리고 흐름을 관리**하는 역할을 수행합니다. 
MAC 주소를 사용하여 통신하는데 MAC 주소는 랜카드마다 할당되어있습니다.  
전송단위는 프레임이며 브리지, 스위치등의 장비를 사용합니다. 

* **네트워크(3계층)** 

논리적인 **주소(IP)체계**와 **라우팅 기능**을 지원합니다.   
그 외에도 **흐름제어, 오류 제어**의 기능을 수행합니다.  
전송단위는 패킷이며 라우터를 사용합니다.  
👉 라우팅 기능이란 데이터를 목적지까지 안전하고 빠르게 전달하는 경로를 찾아서 전송하는 기능입니다.  

* **전송(4계층)** 

통신을 활성화하기 위한 계층입니다. 포트를 열어서 응용프로그램들이 전송을 가능하도록 합니다. 
단대단 오류, 흐름제어를 담당합니다.  
TCP,UDP 프로토콜을 사용합니다. 

* **세션(5계층)** 

통신을 위한 논리적 연결을 담당합니다.  
어플리케이션 간 세션을 구축하고 관리하는 역할을 합니다.  
이는 전송모드(전이중, 반이중 ...)을 결정하고 데이터 송수신의 동기를 관리합니다.  

* **표현(6계층)** 

각각의 어플리케이션이 정보를 잘 통신할수 있도록 필터링하고 변환하는 계층입니다.  
데이터의 확장자 결정과 같은 암호화와 데이터 압축을 수행합니다.  
JPG,MPEG등의 프로토콜이 있습니다. 

* **응용(7계층)** 

소프트웨어,UI를 담당하는 계층입니다. 
즉 응용 프로세스와 직접 연계하여 서비스를 제공합니다. 
DNS,FTP,HTTP등의 프로토콜이 존재합니다. 

 

#### 1-3. crc 오류 검출 방법에 대해 설명하고 어떤 계층에서 주로 사용되는가? 

 전송할 데이터에 (CRC코드 최고차수)비트를 붙이고 CRC코드로 XOR 한 값을 구합니다.  

 그리고 전송할 데이터 뒤에 위에서 구한 값을 붙이고 전송합니다. 

 데이터를 수신하면 CRC코드로 나누고 결과가 0이면 오류가 없는 것이고 다른 값이 나오면 오류가 발생한 것입니다. 

 주로 데이터 링크 계층에서 사용됩니다. 

#### 1-4. 전이중, 반이중 통신방법의 차이가 무엇입니까? 

 전이중 방식은 두개의 통신장치가 동시에 송수신이 가능한것을 의미하고 반이중 방식은 두개의 통신장치가 양방향 통신이 가능하지만 한번에 한쪽으로만 통신이 가능한것을 의미합니다. 

 
#### 1-5. 프로토콜이란 무엇입니까? 

프로토콜이란 국가 간의 약속을 의미하고 통신에서는 통신규약을 의미합니다. 

 

 

### 2. TCP란? 

OSI 7계층중 4계층(전송)의 프로토콜로서 신뢰성을 보장하는 연결지향 통신 프로토콜입니다. 

또한 `3 way handshake`의 과정을 거쳐서 연결되고 `4 way handshake`과정을 거처서 연결을 종료합니다.  

#### 2-1. UDP란?  

OSI 7계층중 4계층(전송)의 프로토콜로서 TCP와는 다르게 신뢰성을 보장하지 않고 비연결지향 통신 프로토콜입니다.  
패킷이 제대로 전송되었는지 확인하는 과정이 없기 때문에(비신뢰성) 때문에 TCP에 비해 속도가 빠르다는 장점이 있습니다.  

#### 2-2. TCP가 연결되고 해제하는 과정을 설명하시오.

**3way handshake**는 TCP 통신에서 정확한 전송을 보장하기 위한 네트워크 연결 방법입니다. 

클라이언트가 SYN패킷(x) 전송==>서버가 SYN(y)+ACK(x+1)패킷을 전송==>클라이언트가 ACK(y+1)을 전송  

**4way handshake**는 통신이 끝났을때 네트워크 연결 해제 방법입니다.  

클라이언트가 FIN 패킷 전송==>서버가ACK전송==>서버가 ACK를 모두 전송하면 FIN 패킷을 전송한다 ==> 클라이언트는 FIN 패킷을 받고 ACK패킷을 전송한다 ==>서버는 ACK패킷을 받고 소켓을 닫는다 ==> 클라이언트도 `TIME WAIT` 동안 기다리다가 소켓을 닫는다.  
👉 클라이언트가 바로 연결을 종료하지 않고 `TIME WAIT`동안 기다리는 이유는 서버가 FIN패킷 전송전에 전송한 패킷이 늦게 도착하는 경우 데이터 유실을 방지하기 위함 때문입니다.  
  

### 3. 흐름제어란 무엇인가? 

송신과 수신측의 데이터 처리 속도 차이를 해결하기 위한 기법입니다.  

송신측의 전송속도가 수신측의 처리속도보다 빠를경우 문제가 생깁니다. 따라서 송신측의 데이터 전송량을 수신측에 따라 조절해 줍니다.  

이러한 흐름제어의 방식에는 **stop-wait** 방식과 **Sliding window** 방식이 있습니다.  

#### 3-1. Stop-wait 방식이란? 

송수신간 처리속도 차이로 인해 발생하는 문제를 해결하는 기법인 흐름제어 중 하나입니다.  

전송한 패킷에 대해 확인 응답을 받고 다음 패킷을 전송하는 방식입니다.  
  
하나를 전송하기 기다려야하기 때문에 비효율적이고 속도가 느리다는 단점이 있습니다.  

#### 3-2. Sliding window 방식이란?  

송수신간 처리속도 차이로 인해 발생하는 문제를 해결하는 기법인 흐름제어 중 하나입니다.  
  
기존의 방식인 Stop-wait방식을 개선한 방법으로 수신 측에서 설정한 윈도우 크기만큼 전송하는 방식입니다.  
  
전송한 패킷에 대한 응답 패킷을 받으면 해당 패킷만큼 윈도우를 옮겨서 전송하는 방식입니다.  

### 4. 혼잡제어란 무엇인가?  

송신측과 네트워크의 데이터 처리속도 차이로 인해 발생하는 문제를 해결하기 위한 기법입니다.  
  
하나의 라우터에 다수의 데이터가 몰리게 된 경우 모든 데이터를 처리할수 없게 되는 경우 송신측의 데이터 전송속도를 제어해서 해결하는 방법입니다.  
  
혼잡제어의 종류에는 **AIMD**, **Slow start**, **빠른 재전송**, **빠른 회복**이 있습니다.  

#### 4-1. AIMD(Additive Increase Multicative Decrease) 

초기 송신시 패킷을 하나씩 보내다가 문제가 없으면 윈도우의 크기를 증가시켜가며 전송하는 방식입니다.  
  
만약 패킷 전송을 실패하거나 응답 시간이 오래 걸리면 패킷 전송 속도를 반으로 줄여가면서 조절하는 방식입니다.  
  
공평하게 네트워크를 사용한다는 장점이 있지만 전송속도를 확보하는데 시간이 오래걸리고 혼잡을 미리 예측하지 못한다는 단점이 있습니다.  

#### 4-2. Slow start 

AIMD처럼 선형으로 윈도우의 크기를 증가시키는 것이 아니라 지수형태로 증가시키는 방법입니다.  
  
하지만 전송속도가 임계점을 넘어가면 선형으로 증가시키는 방법을 사용합니다. 그러다 혼잡이 발생하면 윈도우의 크기를 1로 떨어뜨려서 혼잡 제어를 합니다.  

#### 4-3. Fast retransmit(빠른 재전송) 

패킷이 제대로 전송되면 마지막으로 제대로 수신한 ACK패킷을 응답합니다.  
이때 패킷이 중간에 손실된 경우 특정 ACK패킷이 중복으로 수신되게 되므로 혼잡을 감지하고 윈도우의 크기를 줄이는 방식입니다.   

#### 4-4. Fast recovery(빠른 회복)   

혼잡 상태가 되었을때 윈도우의 크기를 1로 줄이는 것이 아니라 절반으로 줄이고 선형으로 증가시키는 방법입니다.  


### 5. HTTP 와 HTTPS란?  

HTTP는 클라이언트와 서버가 데이터를 주고 받을 때 사용하는 응용계층의 프로토콜입니다.  
  
데이터를 주고 받는 형태는 메시지 형태이고 무상태, 비연결성의 특징을 가집니다.  
  
이러한 특성 때문에 불특정 다수에게 서비스를 제공하는데 유리합니다.  
  
HTTPS는 HTTP의 메세지가 노출될수 있다는 보안의 약점을 보완하기 위해 HTTP 와 SSL 프로토콜을 같이 사용하는 것을 의미합니다.  
쉽게 말하면 HTTP의 메세지를 SSL을 사용하여 공개키 암호화 방식을 사용해 암호화해서 전송하는 것을 의미합니다.  

#### 5-1. 비연결성과 무상태성란?
클라이언트에서 요청하고 서버가 응답하면 바로 연결을 해제하는 것을 의미합니다.  
  
바로 연결을 해제하기 때문에 클라이언트의 이전 상태를 기억하지 못하므로 무상태성의 특징을 가집니다.  

#### 5-2. HTTP의 단점을 보완할 방법은 무엇이 있는지?  
HTTP의 단점인 무상태성을 보완하기 위해 쿠키, 세션, 토큰을 사용합니다.  

최근에는 무상태 특징을 보완하기 위해 쿠키,세션을 사용하여 이전상태를 반영구적으로 기억할수 있기도 합니다. 

**쿠키**는 



 

### 5. 로드밸런싱이란 무엇인지 설명하시오 

서버에 트래픽이 몰릴 경우 이를 분산시켜서 트래픽 문제를 해결하는 방법을 말합니다. 서버를 여러 개 두고 로드밸런서가 클라이언트의 접속을 분산시켜주는 역할을 합니다. 라운드 로빈 방식을 사용하여 스케줄링을 진행하고 같은 IP에서의 접근하면 항상 같은 서버로 연결되는것을 보장해줍니다. 

 

## 5.1 스케일업과 스케일 아웃의 차이점을 설명하고 장단점을 말하시오 

스케일업은 서버 자체의 스펙을 증가시켜서 서버 부하 문제를 해결하는 것을 의미합니다. 

스케일 아웃은 서버의 개수를 증가시켜서 서버 부하 문제를 해결하는 것을 의미합니다. 

스케일 아웃이 비교적 확장성,서버비용,장애에 강인하지만 운영비용이나 관리가 힘들다는 단점이 존재합니다. 

 

5.2 서버에 트래픽이 몰릴경우 어떻게 대처해야하는가 

스케일업과 스케일 아웃이 있다. 

그 외에도 웹 캐시를 사용하여 웹서버에서 컨텐츠를 매번 요청하여 받아오는 것이 아니라 웹캐시 서버에서 불러와서 사이트의 응답시간과 트래픽을 감소시키는 효과를 얻을수 있습니다. 
  
msa추가 공부
#웹 캐시 (tistory.com)웹 캐시 (tistory.com) 


 
### 3. 대칭키와 공개키를 설명하고 차이점을 말하시오. 

대칭키는 암호화키와 복호화키가 같은 방식을 말합니다. 동일한 키를 사용하기에 속도가 빠르지만 키가 노출될 가능성이 있습니다. SHA,MD5 

공개키는 암호화키는 공개되어있고 복호화키는 공개 되어있지 않은 방식을 의미합니다. 대칭키에 비해 속도가 느리고 키가 노출될 가능성이 적습니다. RSA 



## 2.2syn flooding이란 무엇이고 어떻게 대처해야 하는지 

TCP/IP 연결 방법인 3handshake를 이용한 공격방법입니다. 

공격자가 다수의 SYN패킷을 보내고 서버가 보낸 SYN+ACK 패킷에 대해 응답하지 않아서 서버의 메모리를 잡아먹어서 다운시키는 공격방법입니다. 

또는 공격자가 랜덤한 위조 IP를 사용하여 SYN패킷을 전송하여 공격한다. 

 

이를 방지하기 위해 동일한 IP에서 다수의 SYN패킷을 전송하면 drop 시키는 방법을 사용한다. 

또는 라우터를 서버인척 해서 연결이 성립된 경우만 정보를 서버에 전송하는 방법을 사용한다. 

또는 syn-cookie를 사용하여 syn-cookie만 보내고 세션을 닫는다. 

또는 서버의 메모리를 증가시키는 방법이 있다. 
